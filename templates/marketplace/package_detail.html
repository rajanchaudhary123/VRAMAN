{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Bhraman</title>
  <!-- Google Font Family Link Start -->
  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Montserrat:400,700">
  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,800">

  <!-- Google Font Family Link End -->

  <!-- CSS -->
  <link href="{% static 'css/iconmoon.css' %}" rel="stylesheet">
  <link href="{% static 'css/style.css' %}" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href="{% static 'css/cs-foodbakery-plugin.css' %}" rel="stylesheet">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <link href="{% static 'css/bootstrap-slider.css' %}" rel="stylesheet">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <!-- JAVASCRIPT -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="{% static 'js/modernizr.js' %}"></script>
  <script src="{% static 'js/bootstrap.js' %}"></script>
  <link rel="stylesheet" href="{% static 'css/custom.css' %}">
  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  <script src="{% static 'js/custom.js'%}"></script>

  <style>
    body,
    .main-section p,
    .mce-content-body p {
      font: Normal 14px/24px "Open Sans", sans-serif;
      letter-spacing: 0px;
      text-transform: none;
      color: #515151 !important;
    }

    /* Hide Radio button */
    .rate>input {
      display: none;
    }

    .rate {
      display: inline-block;
      ;
      border: 0;
    }

    .rate>label {
      float: right;
    }

    /* Showing the stars */
    .rate>label:before {
      display: inline-block;
      font-size: 1.1rem;
      font-family: FontAwesome;
      content: "\f005";
      margin: 0;
      padding: 0.3rem .2rem;
      cursor: pointer;
    }

    /* Half star */
    .rate .half:before {
      content: "\f089";
      position: absolute;
      padding-right: 0;
    }

    /* Click and hover */
    input:checked~label,
    label:hover~label {
      color: #ffb503;
    }

    /* hover hightlight */
    input:checked+label:hover,
    input:checked~label:hover,
    input:checked~label:hover~label,
    label:hover~input:checked~label {
      color: #cc9000;
    }

    .rating-star i {
      color: #ffb503 !important;
    }

    .rate i {
      color: #ffb503 !important;
    }

    .review-box {
      border: 1px solid #ccc;
      padding: 10px;
      background-color: #f9f9f9;
      margin-bottom: 10px;
      /* Add more styles as needed */
    }

    .review-box h6 {
      color: #333;
      font-weight: bold;
      /* Add more styles as needed */
    }

    .review-box p {
      color: #666;
      /* Add more styles as needed */
    }
  </style>
</head>
{% include 'includes/navbar.html' %}
{% block content %}
<h4>PACKAGE DETAIL</h4>
<div class="tab-content">
  <div id="home" class="tab-pane in active">
    <div class="menu-itam-holder">

      <div id="menu-item-list-6272" class="menu-itam-list">
        <ul>
          {% for package in package %}
          <li class="has-border">

            {% if package.image %}
            <a href="#"><img src="{{ package.image.url }}" height="250" width="250"
                class="attachment-full size-full wp-post-image" alt=""></a>

            {% else %}
            <a href="#"><img src="{% static 'images/default-profile.png' %}" height="125"
                class="attachment-full size-full wp-post-image" alt=""></a>
            {% endif %}




            {% if package.image2 %}
            <a href="#"><img src="{{ package.image2.url }}" height="250" width="250"
                class="attachment-full size-full wp-post-image" alt=""></a>


            {% endif %}




            {% if package.image3 %}
            <a href="#"><img src="{{ package.image3.url }}" height="250" width="250"
                class="attachment-full size-full wp-post-image" alt=""></a>


            {% endif %}




            {% if package.image4 %}
            <a href="#"><img src="{{ package.image4.url }}" height="250" width="250"
                class="attachment-full size-full wp-post-image" alt=""></a>


            {% endif %}

          </li>
          <div class="rate">
            <b>Average Rating:</b>
            <div class="rate">
              <span>
                <i class="fa fa-star{% if avg < 0.5 %}-o{% elif avg >= 0.5 and avg < 1 %}-half-o {% endif %}"
                  aria-hidden="true"></i>
                <i class="fa fa-star{% if avg < 1.5 %}-o{% elif avg >= 1.5 and avg < 2 %}-half-o {% endif %}"
                  aria-hidden="true"></i>
                <i class="fa fa-star{% if avg < 2.5 %}-o{% elif avg >= 2.5 and avg < 3 %}-half-o {% endif %}"
                  aria-hidden="true"></i>
                <i class="fa fa-star{% if avg < 3.5 %}-o{% elif avg >= 3.5 and avg < 4 %}-half-o {% endif %}"
                  aria-hidden="true"></i>
                <i class="fa fa-star{% if avg < 4.5 %}-o{% elif avg >= 4.5 and avg < 5 %}-half-o {% endif %}"
                  aria-hidden="true"></i>
              </span>
            </div>
          </div>

          <div class="text-holder">
            <div><b>Package Name:</b> {{ package }} </div>
            <div><b>Package Description:</b> {{ package.description }} </div>
            <div><b>Experiences Covered:</b> {{ package.experiences_covered }} </div>
            <div><b>Inclusions:</b> {{ package.inclusions }} </div>
            <div><b>Durations:</b> {{ package.durations }} </div>
            <div><b>Package Address:</b> {{ package.address }} </div>
            <div><b>Package Country:</b> {{ package.country }} </div>
            <div><b>Package State: </b> {{ package.state }} </div>
            <div><b>Package City:</b> {{ package.city }} </div>
            <div><b>Package Latitude:</b> {{ package.latitude }} </div>
            <div><b>Package Longitude:</b> {{ package.longitude }} </div>



          </div>
          <div class="price-holder">
            <div style="margin-right: 28px; font-size: large;"><b>Price:</b>$ {{ package.price }} </div>
          </div>

          <div class="price-holder" style="margin-right: 20px; margin-top: 28px;">
            {% if user.is_authenticated and user.get_role == 'Customer' %}
            <a href="#" class="decrease_cart" data-id="{{ package.id }}" data-url="{% url 'decrease_cart' package.id %}"
              style="margin-right: 28px;"><i class="icon-minus text-color"></i></a>
            <label id="qty-{{package.id}}">0</label>
            <a href="#" class="add_to_cart" data-id="{{ package.id }}" data-url="{% url 'add_to_cart' package.id %}"><i
                class="icon-plus4 text-color"></i></a>
          </div>
          {% endif %}
        </ul>
      </div>
    </div>
  </div>
</div>
</div>
{% if user.is_authenticated and user.get_role == 'Vendor' %}
<b>Average Rating:</b>
<div class="rate">
  <span>
    <i class="fa fa-star{% if avg < 0.5 %}-o{% elif avg >= 0.5 and avg < 1 %}-half-o {% endif %}"
      aria-hidden="true"></i>
    <i class="fa fa-star{% if avg < 1.5 %}-o{% elif avg >= 1.5 and avg < 2 %}-half-o {% endif %}"
      aria-hidden="true"></i>
    <i class="fa fa-star{% if avg < 2.5 %}-o{% elif avg >= 2.5 and avg < 3 %}-half-o {% endif %}"
      aria-hidden="true"></i>
    <i class="fa fa-star{% if avg < 3.5 %}-o{% elif avg >= 3.5 and avg < 4 %}-half-o {% endif %}"
      aria-hidden="true"></i>
    <i class="fa fa-star{% if avg < 4.5 %}-o{% elif avg >= 4.5 and avg < 5 %}-half-o {% endif %}"
      aria-hidden="true"></i>
  </span>
</div>
<div>
  <b>Total reviews: {{ count1 }}</b>
</div>
{% endif %}
<!-- Main Section End -->
{% if user.is_authenticated and user.get_role == 'Customer' %}
<div class="row" style="margin-left: 100px; margin-top: 10px;">
  <div class="col-md-9" style="margin-left: 200px; margin-top: 10px;">
    <form action="{% url 'submit_review_package' package.id %}" method="POST">

      {% csrf_token %}
      <h5>Write Your Review</h5>
      <b>Average Rating:</b>
      <div class="rate">
        <span>
          <i class="fa fa-star{% if avg < 0.5 %}-o{% elif avg >= 0.5 and avg < 1 %}-half-o {% endif %}"
            aria-hidden="true"></i>
          <i class="fa fa-star{% if avg < 1.5 %}-o{% elif avg >= 1.5 and avg < 2 %}-half-o {% endif %}"
            aria-hidden="true"></i>
          <i class="fa fa-star{% if avg < 2.5 %}-o{% elif avg >= 2.5 and avg < 3 %}-half-o {% endif %}"
            aria-hidden="true"></i>
          <i class="fa fa-star{% if avg < 3.5 %}-o{% elif avg >= 3.5 and avg < 4 %}-half-o {% endif %}"
            aria-hidden="true"></i>
          <i class="fa fa-star{% if avg < 4.5 %}-o{% elif avg >= 4.5 and avg < 5 %}-half-o {% endif %}"
            aria-hidden="true"></i>
        </span>
      </div>
      <div>
        <b>Total reviews: {{ count1 }}</b>
      </div>



      <div>
        <!-- Rating stars -->
        <label>How do you rate this package?</label>
        <br>
        <div class="rate">
          <input type="radio" name="rating" id="rating10" value="5" required /><label for="rating10" title="5"></label>
          <input type="radio" name="rating" id="rating9" value="4.5" required /><label for="rating9" title="4.5"
            class="half"></label>
          <input type="radio" name="rating" id="rating8" value="4" required /><label for="rating8" title="4"></label>
          <input type="radio" name="rating" id="rating7" value="3.5" required /><label for="rating7" title="3.5"
            class="half"></label>
          <input type="radio" name="rating" id="rating6" value="3" required /><label for="rating6" title="3"></label>
          <input type="radio" name="rating" id="rating5" value="2.5" required /><label for="rating5" title="2.5"
            class="half"></label>
          <input type="radio" name="rating" id="rating4" value="2" required /><label for="rating4" title="2"></label>
          <input type="radio" name="rating" id="rating3" value="1.5" required /><label for="rating3" title="1.5"
            class="half"></label>
          <input type="radio" name="rating" id="rating2" value="1" required /><label for="rating2" title="1"></label>
          <input type="radio" name="rating" id="rating1" value="0.5" required /><label for="rating1" title="0.5"
            class="half"></label>
        </div>

        <br>

        Review Title:
        <input type="text" class="form-control" name="subject">
        <br>
        Review:
        <textarea name="review" rows="4" class="form-control"></textarea>
        <br>
        {% if user.is_authenticated %}
        {% if orderpackage %}
        <input type="submit" value="Submit Review" class="btn btn-primary">
        {% else %}
        <p>You must purchase this package to post a review.</p>
        {% endif %}
        {% else %}
        <p>You must be logged in to post a review. <span><a href="{% url 'login' %}">Login now</a></span></p>
        {% endif %}

        <!--{% if user.is_authenticated %}
                        <input type="submit" value="Submit Review Package" class="btn btn-primary">
                {% else %}
                <p>You must be logged in to post a review. <span><a href="{% url 'login' %}">Login now</a></span></p>
                {% endif %}-->


      </div>
      {% include 'includes/alerts.html' %}
    </form>

    {%endif%}
    {% endfor %}

    <br>

    <header class="section-heading">
      <h3>Customer Reviews </h3>

    </header>


    {% for review in reviewpackage %}
    <div class="review-box">
      <article class="box mb-3">
        <div class="icontext w-100">
          <div class="text">
            <span class="date text-muted float-md-right">{{ review.updated_at }}</span>
            <h6 class="mb-1">{{ review.user.full_name }}</h6>
            <div class="rate">
              <span>
                <i class="fa fa-star{% if review.rating == 0.5 %}-half-o{% elif review.rating < 1 %}-o{% endif %}"
                  aria-hidden="true"></i>
                <i class="fa fa-star{% if review.rating == 1.5 %}-half-o{% elif review.rating < 2 %}-o{% endif %}"
                  aria-hidden="true"></i>
                <i class="fa fa-star{% if review.rating == 2.5 %}-half-o{% elif review.rating < 3 %}-o{% endif %}"
                  aria-hidden="true"></i>
                <i class="fa fa-star{% if review.rating == 3.5 %}-half-o{% elif review.rating < 4 %}-o{% endif %}"
                  aria-hidden="true"></i>
                <i class="fa fa-star{% if review.rating == 4.5 %}-half-o{% elif review.rating < 5 %}-o{% endif %}"
                  aria-hidden="true"></i>
              </span>
            </div>
          </div>
        </div> <!-- icontext.// -->
        <div class="mt-3">
          <h6>{{ review.subject }}</h6>
          <p>{{ review.review }}</p>
        </div>
      </article>
    </div>
    {% endfor %}




  </div> <!-- col.// -->
</div> <!-- row.// -->


</div> <!-- container .//  -->
</section>
<!-- ========================= SECTION CONTENT END// ========================= -->

{% endblock %}
{% include 'includes/footer.html' %}